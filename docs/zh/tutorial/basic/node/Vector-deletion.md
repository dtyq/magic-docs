# 向量删除节点
## 一、节点介绍
向量删除节点是一个用于从知识库中移除特定知识片段的节点，它可以帮助您有选择地移除不再需要的知识内容。这个节点使您能够维护知识库的时效性和准确性，移除过时、错误或冗余的知识片段。

**图片说明：**

向量删除节点界面主要包含知识库选择区、元数据匹配设置和业务 ID区三部分个部分。从上往下可以选择需要操作的知识库，可以设置删除条件，包括按ID删除、按关键词删除等方式 
![向量删除节点](https://cdn.letsmagic.cn/static/img/Vector-deletion.png)

## 为什么需要向量删除节点？
**在使用向量知识库的过程中，随着时间推移，您可能会遇到以下情况需要删除部分知识：**
- 知识内容已过时，需要清理旧数据
- 误导入了错误或不相关的信息，需要移除
- 调整知识库结构，需要删除重复或冗余的内容
- 隐私或敏感信息需要从知识库中移除
- 知识库容量接近限制，需要删除低价值内容
向量删除节点提供了精确删除能力，可以在不影响其他知识内容的情况下，有选择地移除特定知识片段，保持知识库的质量和性能。
## 适用场景
### 场景一：内容更新维护
当您的业务文档有更新时，您可以先删除旧版知识片段，再导入新版内容，确保知识库中的信息始终保持最新状态。
### 场景二：错误内容纠正
当发现知识库中存在错误信息或不准确的内容时，可以使用向量删除节点精确移除这些内容，避免影响用户体验。
### 场景三：知识库重组与整理
在需要对知识库进行重新组织或整理时，可以先删除特定类别的内容，然后重新导入更有条理的知识结构。
## 节点参数说明
### 输入参数
|参数名|说明|是否必填|参数类型|
|---|---|---|---|
|选择知识库|选择要操作的知识库，通过【固定值或表达式】，从系统中已创建的知识库中选择|是|下拉选择|
|删除方式|当选择"按业务 ID删除"时，通过添加变量，删除指定知识库的数据当选择"按条件删除"时，通过表达式设置筛选条件，如关键词、时间范围等|是|二选一|

### 输出参数
向量删除节点执行成功后，会在后台完成内容的删除，但不会直接输出特定的结果数据。成功删除后，该内容可通过向量搜索节点进行检索确认。
## 使用说明
### 基本配置步骤
1. **选择知识库**：
    1. 从下拉菜单中选择不同的方式
    2. 通过@动态引用上个节点的知识库或者是已创建的知识库
2. **选择删除方式**：
    1. 如选择"按ID删除"，请在"片段ID列表"字段中输入要删除的ID，多个ID用逗号分隔
    2. 如选择"按条件删除"，请设置筛选条件，如包含特定关键词的片段
3. **连接节点**：将向量删除节点与上游节点（提供删除条件的节点）和下游节点（处理删除结果的节点）连接起来
### 进阶技巧
1. **使用变量动态指定ID**：您可以使用上游节点的输出变量作为删除条件，实现动态删除。例如，通过"代码执行"节点筛选出需要删除的ID列表，传递给向量删除节点。
2. **批量条件删除**：当需要清理大量符合特定条件的数据时，可以使用条件删除功能配合多个条件组合（如时间范围+关键词），提高效率。
3. **循环节点配合使用**：对于复杂的删除场景，可以结合循环节点实现逐批删除，避免一次性删除过多数据导致的超时问题。
## 注意事项
### 删除操作不可逆
一旦执行删除操作，被删除的知识片段数据将**无法恢复**。因此，在进行批量删除前，建议先:
- 导出相关知识片段备份
- 使用小范围测试验证删除条件准确性
- 确保删除操作有明确的业务需求
### 性能影响
大规模删除操作可能影响系统性能，请注意：
- 避免在业务高峰期进行大量删除操作
- 对于大型知识库，建议分批次删除而非一次性删除全部内容
- 删除操作完成后，知识库的向量索引需要一定时间重建，期间查询性能可能受到影响
### 权限限制
执行向量删除操作需要相应的权限，请确保：
- 工作流创建者具有知识库的管理权限
- 删除操作符合企业数据管理规范
- 关键知识库的删除操作应设置适当的审批流程
## 常见问题
### 删除操作执行成功但知识库查询结果未更新
**问题**: 删除操作显示成功，但通过向量搜索节点仍能查询到已删除的内容。

**解决方案**:
- 向量知识库的索引更新存在一定延迟，通常需要等待1-5分钟完成索引刷新
- 如长时间未更新，可尝试在删除节点后添加适当的等待节点
- 检查是否有重复内容存在，确保删除条件覆盖了所有需要删除的内容
### 批量删除时出现超时错误
**问题**: 在删除大量知识片段时，节点执行超时或报错。

**解决方案**:
- 将大批量删除拆分为多个小批次操作
- 使用循环节点实现分批删除
- 增加节点执行超时时间设置（如有此选项）
- 选择系统负载较低的时间执行大批量删除
### 无法删除特定知识片段
**问题**: 某些知识片段无法被删除，即使提供了正确的ID。

**解决方案**:
- 检查知识片段是否有特殊保护标记
- 确认操作账号是否有足够权限
- 检查知识片段ID是否正确（注意ID格式和大小写）
- 尝试使用条件删除方式作为替代方案
## 最佳实践
### 常见搭配节点
|**节点类型**|**搭配原因**|
|---|---|
|向量搜索节点|先通过向量搜索确认要删除的内容，再进行删除|
|代码执行节点|用于处理复杂的删除条件逻辑或格式化删除ID列表|
|条件分支节点|根据删除结果判断后续流程|
|循环节点|实现分批删除大量数据|
|向量存储节点|在删除旧内容后存储更新的内容|

<font color="#CE2B2E">注意：删除操作虽然简单但不可逆，请务必在充分了解操作影响的情况下谨慎使用。定期维护和更新知识库，将使您的智能应用始终保持最佳状态</font>